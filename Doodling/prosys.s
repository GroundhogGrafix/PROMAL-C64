; --- File PROSYS.S ---; PROMAL 2.1 (6502) System Defs. (07/16/86); Library Routines...EXT ASM FUNC BYTE GETTST AT $FC6 ; T device readyEXT ASM FUNC WORD INLIST AT $F51 ; Link list searchEXT ASM PROC REDIRECT AT $F7B ; Redirect I/OEXT ASM FUNC WORD GETVER AT $F99 ; Version, $01xx=C64,02xx=AplEXT ASM FUNC WORD MLGET AT $F9F ; Load M/L progEXT ASM PROC CLSALL AT $FA2  ; Close all filesEXT ASM PROC PROQUIT AT $FCC ;Exit PROMAL; Misc...EXT BYTE DATE [] AT $C12 ; Day, month, year- in hexEXT WORD RANDWD  AT $C22 ; Seed for RANDOMEXT BYTE DRTERR  AT $DF6 ; Runtime error #, devel.EXT BYTE ALPHALK AT $DFF ; Alpha-lock flag, $80 = upper case EXT BYTE COMD [] AT $D74 ; Comd line split into argsEXT BYTE PREFIX [3] AT $C68 ; File Prefix string "0:"; Pointers, * means must be on page bound ($XX00)...EXT WORD LOMEM  AT $C16 ; * Lowest allocatable addr (4F00)EXT WORD LOFREE AT $C18 ; * Lowest presently unaloc.(4F00)EXT WORD HIFREE AT $C1A ; * Highest+1 presently free RAM (9900)EXT WORD HIMEM  AT $C1C ; * Highest+1 allocatable  (A100)EXT WORD OSORG  AT $C2B ; * Executive code origin  (A200)EXT WORD MEMLIM AT $C2D ; * End of usable memory+1 (D000)EXT WORD WORG   AT $DC5 ; * Workspace origin (9900)EXT WORD WPTR   AT $DC7 ;   W pointer   (9900)EXT WORD WEOF   AT $DC9 ;   W E-O-F     (9900)EXT WORD WLIM   AT $DCB ; * W Limit+1   (A100)EXT WORD WSIZE  AT $DDB ;   W size      (0800) 2KEXT WORD LORG   AT $DCD ;   Library origin (C900)EXT WORD LPTR   AT $DCF ;   L pointer      (C900)EXT WORD LEOF   AT $DD1 ;   L E-O-F        (CFBB)EXT WORD LLIM   AT $DD3 ;   L Limit+1      (D000)EXT WORD GVORG  AT $DDD ; * Shared vars start (A100); File & Disk management locationsEXT BYTE BFILTYP AT $C0B ; System-dep. File TypeEXT BYTE DFEXT   AT $C0D ; Default extension ('C')EXT BYTE NOFNCHK AT $CF2 ; Bit 7=1=no default extensionEXT WORD PBLKCNT AT $DFD ; PUTBLKF actual output count; LOADer variables, *= mode bit-flagsEXT ASM PROC LOAD  AT $F87 ;PROG/OVERLAY LOADERCON LDCHAIN= $01 ; * Chain flag (replace caller)CON LDPRCLR= $02 ; * Preclear all programs flagCON LDRELD = $04 ; * Reload form disk flagCON LDRECLM= $08 ; * Reclaim space when done flagCON LDNOGO = $10 ; * Lload, dont execute flagCON LDUNLD = $20 ; * Just unload flagEXT BYTE LDERR     AT $C1E ; Loader error code (0=ok)EXT BYTE LDNAME [] AT $BB0 ; Name of last load attemptEXT BYTE LDNOCHK   AT $BC0 ; TRUE if skip checksum verifyEXT BYTE NLT       AT $C1F ; # active loader tbl entries; T device modeEXT BYTE TBAUD AT $DE9 ;3=110,6=300,7=600,8=12,A=24,C=48,E=96EXT BYTE TPARITY AT $DEA ;0=none,1=odd,2=even,3=mark,4=spaceEXT BYTE TDATAB  AT $DEB ; 0=8,1=7,2=6,3=5EXT BYTE TSTOPB  AT $DEC ; 0=1 stop bit, 1=2 EXT BYTE TEOFCH  AT $DED ; E-O-F char (CTRL-Z=$1A)EXT BYTE TDEVALF AT $DEE ; Bit7=1=add LF out, Bit6=1 strip inEXT BYTE TDEVRAW AT $DEF ; Raw mode T I/O flagEXT BYTE TDEVST  AT $DF0 ; T status from last operation; Commodore 64 only...EXT BYTE EDRES    AT $CFB ; $80=EDITor resident flag, $00=noEXT BYTE C64DDV0  AT $DE0 ; C-64 Disk Device, drive 0 (8)EXT BYTE C64DDV1  AT $DE1 ; C-64 Disk Device ,drive 1 (8/9)EXT BYTE C64N1541 AT $DE2 ; $80="Not 1541/1571 compat." flagEXT BYTE C64DYNO  AT $DE3 ; $80=Enable C-64 Dyno Disk flagEXT BYTE C64PSA   AT $DF3 ; C-64 secondary printer addr (7)EXT BYTE C64PUL   AT $DF4 ; C-64 Printer case flip flagEXT BYTE C64PDV   AT $DF5 ; C-64 Printer device # (4);  --- End of file PROSYS.S ---